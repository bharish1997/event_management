<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Dashboard</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
<style>
    .btn:focus, .btn:active, button:focus, button:active {
  outline: none !important;
  box-shadow: none !important;
}

#image-gallery .modal-footer{
  display: block;
}

.thumb{
  margin-top: 15px;
  margin-bottom: 15px;
}
</style>
</head>
<body>
  <div>
    <a href="/" type="button" class="btn btn-primary">HOME</a>
  </div>
    <div class="accordion" id="accordionExample">
        <div class="card">
          <div class="card-header" id="headingOne">
            <h5 class="mb-0">
              <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                <div class="col-md"><b><h4>Events Details</h4></b></div>
              </button>
            </h5>
          </div>
      
          <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordionExample">
            <div class="card-body">
                <div class="table-responsive">
                    <div class="table-wrapper">
                        <table class="table table-striped table-hover table-bordered">
                            <thead>
                                <tr>
                                    <th>Event</th>
                                    <th>From</th>
                                    <th>Till</th>
                                    <th>Department</th>
                                    <th>Level</th>
                                    <th>Venue</th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:if="${events.empty}">
                                    <td colspan="7"> No Events Available </td>
                                </tr>
                        <tr th:each="event : ${events}">
                            <td><span th:text="${event.event_title}"> </span></td>
                            <td><span th:text="${event.from_date}"></span></td>
                            <td><span th:text="${event.to_date}"></span></td>
                            <td><span th:text="${event.department_name}"></span></td>
                            <td><span th:text="${event.event_level}"></span></td>
                            <td><span th:text="${event.venue}"></span></td>
                        </tr>
                            </tbody>
                        </table>
                        <table class="table table-striped table-hover table-bordered">
                            <thead>
                                <tr>
                                    <th>Applied Date</th>
                                    <th>Event Reference Number</th>
                                    <th>Event Type</th>
                                    <th>No of Days</th>
                                    <th>IQAC/AEGIS</th>
                                    <th>Sponsoring Agency</th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:if="${events.empty}">
                                    <td colspan="7"> No Events Available </td>
                                </tr>
                        <tr th:each="event : ${events}">
                            <td><span th:text="${event.applied_date}"> </span></td>
                            <td><span th:text="${event.event_reference_no}"></span></td>
                            <td><span th:text="${event.event_type}"></span></td>
                            <td><span th:text="${event.no_of_days}"></span></td>
                            <td><span th:text="${event.iqac_aegis}"></span></td>
                            <td><span th:text="${event.sponsoring_agency}"></span></td>
                        </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingTwo">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                <div class="col-md"><b><h4>Guests Details</h4></b></div>
              </button>
            </h5>
          </div>
          <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
            <div class="card-body">
                <div class="card-body">
                    <div class="table-responsive">
                        <div class="table-wrapper">
                            <table class="table table-striped table-hover table-bordered">
                                <thead>
                                    <tr>
                                        <th>Category</th>
                                        <th>Name</th>
                                        <th>Designation</th>
                                        <th>Organization</th>
                                        <th>About</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:if="${guests.empty}">
                                        <td colspan="7"> No Events Available </td>
                                    </tr>
                            <tr th:each="guest : ${guests}">
                                <td><span th:text="${guest.category}"> </span></td>
                                <td><span th:text="${guest.name}"></span></td>
                                <td><span th:text="${guest.designation}"></span></td>
                                <td><span th:text="${guest.organization}"></span></td>
                                <td><span th:text="${guest.about}"></span></td>
                            </tr>
                                </tbody>
                            </table>
                            <a th:href="@{/guest_list(event_id=${events[0].event_reference_no})}" >Download Report</a>
                        </div>
                    </div>
                </div>
              </div>
              <form action="" th:action="@{/guest_update(event_id=${events[0].event_reference_no})}"  method="POST" th:object="${guests}">
                <table id="myTable" class=" table order-list">
                <thead>
                    <tr>
                        <td>Category</td>
                        <td>Name</td>
                        <td>Designation</td>
                        <td>Organization</td>
                        <td>About</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="col-sm-2">
                            <input type="text" name="category" class="form-control"/>    
                        </td>
                        <td class="col-sm-2">
                          <input type="text" name="name"  class="form-control"/>
                      </td>
                      <td class="col-sm-2">
                        <input type="text" name="designation"  class="form-control"/>
                    </td>
                        <td class="col-sm-2">
                            <input type="text" name="organization"  class="form-control"/>
                        </td>
                        <td class="col-sm-2">
                          <textarea type="text" name="about" maxlength="500" cols="50" class="form-control"/></textarea>
                      </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4" style="text-align: left;">
                            <input type="submit" class="btn btn-lg btn-block "  value="Add Row" />
                        </td>
                    </tr>
                    <tr>
                    </tr>
                </tfoot>
            </table>
        </form>
            </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingThree">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                <div class="col-md"><b><h4>Budgets Details</h4></b></div>
              </button>
            </h5>
          </div>
          <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
            <!--Budget Table -->
            <div class="card-body">
                <div class="card-body">
                    <div class="card-body">
                        <div class="table-responsive">
                            <div class="table-wrapper">
                                <table class="table table-striped table-hover table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Particulars</th>
                                            <th>Amount</th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr th:if="${budgets.empty}">
                                            <td colspan="7"> No Events Available </td>
                                        </tr>
                                        <span th:each="budget : ${budgets}">
                                <tr>
                                    <td><span th:text="${budget.particulars}"> </span></td>
                                    <td><span th:text="${budget.amount}"></span></td>
                                </tr>
                              </span>
                                    </tbody>
                                </table>
                                <a th:href="@{/budget_list(event_id=${events[0].event_reference_no})}" >Download Report</a>
                            </div>
                        </div>
                    </div>
                  </div>
            </div>
            <!-- Add Budget -->
            <div class="container">
        <form action="" th:action="@{/budget_update(event_id=${events[0].event_reference_no})}"  method="POST" th:object="${budgets}">
        <table id="myTable" class=" table order-list">
        <thead>
            <tr>
                <td>Particular</td>
                <td>Amount</td>
            </tr>
        </thead>
        
        <tbody>
            <tr>
                <td class="col-sm-4">
                    <input type="text" name="particulars" class="form-control"/>
                    
                </td>
                <td class="col-sm-3">
                    <input type="number" name="amount"  class="form-control"/>
                </td>
            </tr>
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4" style="text-align: left;">
                    <input type="submit" class="btn btn-lg btn-block "  value="Add Row" />
                </td>
            </tr>
            <tr>
            </tr>
        </tfoot>
    </table>
</form>
    </div> 
            
          </div>
        </div>
        <div class="card">
            <div class="card-header" id="headingFour">
              <h5 class="mb-0">
                <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                  <div class="col-md"><b><h4>Photos</h4></b></div>
                </button>
              </h5>
            </div>
            <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample">
              <div class="card-body">
                  <span th:each="event : ${events}">
                <form th:action="@{/details(event_id=${event.event_reference_no})}" method="POST" enctype="multipart/form-data" th:object="${photos}">
                    <input type="file" name="files" multiple>
                    <input type="submit" value="Upload">
                </form>
            </span>
            <div class="row">
                <div class="row">
                    <!-- <img th:src="@{/photos/guru_nanak_logo.jpeg}"/>
                    <img th:src="@{/photos/E001/leaf_banner_violet.png}"/> -->
                    <span th:each="photo : ${photos}">
                      <!-- <img th:src="@{${photo.location}}"> -->
                    <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                      <a class="thumbnail" href="#" data-image-id="" data-toggle="modal" data-title=""
                         th:data-image="@{${photo.location}}"
                         data-target="#image-gallery">
                         <!-- <h1 th:text="${photo.event_reference_no}"></h1> -->
                          <img class="img-thumbnail"
                               th:src="@{${photo.location}}"
                               alt="Another alt text">
                      </a>
                  </div>
                </span>
                </div>
        
        
                <div class="modal fade" id="image-gallery" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title" id="image-gallery-title"></h4>
                                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <img id="image-gallery-image" class="img-responsive col-md-12" src="">
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary float-left" id="show-previous-image"><i class="fa fa-arrow-left"></i>
                                </button>
                                
                                <button type="button" id="show-next-image" class="btn btn-secondary float-right"><i class="fa fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
          </div>
      </div>
      
      <script>
          let modalId = $('#image-gallery');

$(document)
  .ready(function () {

    loadGallery(true, 'a.thumbnail');

    //This function disables buttons when needed
    function disableButtons(counter_max, counter_current) {
      $('#show-previous-image, #show-next-image')
        .show();
      if (counter_max === counter_current) {
        $('#show-next-image')
          .hide();
      } else if (counter_current === 1) {
        $('#show-previous-image')
          .hide();
      }
    }

    /**
     *
     * @param setIDs        Sets IDs when DOM is loaded. If using a PHP counter, set to false.
     * @param setClickAttr  Sets the attribute for the click handler.
     */

    function loadGallery(setIDs, setClickAttr) {
      let current_image,
        selector,
        counter = 0;

      $('#show-next-image, #show-previous-image')
        .click(function () {
          if ($(this)
            .attr('id') === 'show-previous-image') {
            current_image--;
          } else {
            current_image++;
          }

          selector = $('[data-image-id="' + current_image + '"]');
          updateGallery(selector);
        });

      function updateGallery(selector) {
        let $sel = selector;
        current_image = $sel.data('image-id');
        $('#image-gallery-title')
          .text($sel.data('title'));
        $('#image-gallery-image')
          .attr('src', $sel.data('image'));
        disableButtons(counter, $sel.data('image-id'));
      }

      if (setIDs == true) {
        $('[data-image-id]')
          .each(function () {
            counter++;
            $(this)
              .attr('data-image-id', counter);
          });
      }
      $(setClickAttr)
        .on('click', function () {
          updateGallery($(this));
        });
    }
  });

// build key actions
$(document)
  .keydown(function (e) {
    switch (e.which) {
      case 37: // left
        if ((modalId.data('bs.modal') || {})._isShown && $('#show-previous-image').is(":visible")) {
          $('#show-previous-image')
            .click();
        }
        break;

      case 39: // right
        if ((modalId.data('bs.modal') || {})._isShown && $('#show-next-image').is(":visible")) {
          $('#show-next-image')
            .click();
        }
        break;

      default:
        return; // exit this handler for other keys
    }
    e.preventDefault(); // prevent the default action (scroll / move caret)
  });

      </script>


</body>
</html>

